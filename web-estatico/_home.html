<form id="buscaAvancada" class="hide">
    <div class="content-title">
        <div class="wrapper">
            <h1>Busca avançada<a id="fastSearch" title="Busca rapida" href="#">[-]</a></h1>
        </div>
    </div>
    <div class="wrapper">
        <div class="form-header">
            <div class="form-header-group">
                <label for="tiposAquisicaoAvancada">Tipo de aquisição</label>
                <select class="form-header-alt-select" id="tiposAquisicaoAvancada" name="tiposAquisicaoAvancada">
                    <option value="0">Comprar</option>
                    <option value="1">Alugar</option>
                    <option value="2">Temporada</option>
                </select>
                <div>
                    <div class="peso" id="pesoAquisicao" title="Define a prioridade na busca, por exemplo se o imporante é o tipo de aquisição coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="tipoImovel">Tipo de imóvel</label>
                <select class="form-header-alt-select" id="tipoImovel" name="tipoImovel">
                    <option value="0">Apartamento</option>
                    <option value="1">Casa</option>
                    <option value="2">Flat</option>
                    <option value="3">Kitchenette</option>
                    <option value="4">Outros</option>
                </select>
                <div>
                    <div class="peso" id="pesoTipoImovel" title="Define a prioridade na busca, por exemplo se o imporante é o tipo do imóvel coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="precoDe">Preço</label>
                <input class="inputSizeMediumSmaller" id="precoDe" name="precoDe" placeholder="De" type="text" />
                <input class="inputSizeMediumSmaller" id="precoAte" name="precoAte" placeholder="Até" type="text" />
                <div>
                    <div class="peso" id="pesoPreco" title="Define a prioridade na busca, por exemplo se o imporante é o preço coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="bairro">Bairro</label>
                <input class="inputSizeMediumSmaller" id="bairro" name="bairro" type="text" />
                <div>
                    <div class="peso" id="pesoBairro" title="Define a prioridade na busca, por exemplo se o imporante é o bairro coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="raio">Raio (mts)</label>
                <input class="inputSizeMediumSmaller" id="raio" name="raio" placeholder="Ex. 1.000" type="text" />
                <div>
                    <div class="peso" id="pesoRaio" title="Define a prioridade na busca, por exemplo se o imporante é o raio coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="dormitorios">Dormitórios</label>
                <select class="form-header-alt-select" id="dormitorios" name="dormitorios">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4+</option>
                </select>
                <div>
                    <div class="peso" id="pesoDormitorios" title="Define a prioridade na busca, por exemplo se o imporante é a quantidade de dormitórios coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <label for="garagens">Garagens</label>
                <select class="form-header-alt-select" id="garagens" name="garagens">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3+</option>
                </select>
                <div>
                    <div class="peso" id="pesoGaragens" title="Define a prioridade na busca, por exemplo se o imporante é a quantidade de vagar na garagem coloque a barra no máximo"></div>
                </div>
            </div>
            <div class="form-header-group">
                <button alt="Buscar" id="buscarAvancado" title="Buscar" type="submit">Buscar</button>
            </div>
        </div>
    </div>
</form>
<div id="showSearch" class="hide">
    <a href="#" id="showPanel" title="Mostrar painel de busca">Mostrar painel</a>
</div>
<div id="map">
    <form id="buscaRapida">
        <div class="form-header">
            <div id="buscaRapidaOcultar">
                <a href="#" id="hidePanel" title="Ocultar painel de busca">Ocultar painel</a>
            </div>
            <select class="clr form-header-alt-select" id="tiposAquisicaoRapida" name="tiposAquisicaoRapida">
                <option value="0">Comprar</option>
                <option value="1">Alugar</option>
                <option value="2">Temporada</option>
            </select>
            <input alt="Digite o bairro, cidade ou código do imóvel" id="endereco" name="endereco" placeholder="Bairro, estabelecimento ou código do apartamento" title="Bairro, estabelecimento ou código do apartamento" type="text" />
            <button alt="Buscar" id="buscarRapido" title="Buscar" type="submit">Buscar</button><a id="advancedSearch" title="Busca avançada" href="#">[+]</a>
        </div>
        <!--hidden fields-->
        <input type="hidden" name="lat" id="lat" />
        <input type="hidden" name="lng" id="lng" />
    </form>
</div>
<div class="flexslider">
    <ul class="homeSlides"></ul>
</div>
<script charset="utf-8" type="text/javascript">
    //Carga dinâmica dos slides
    $.homeSlide = function (json) {
        var li = '', onclick = '';
        $.each(json.slides, function (i, key) {
            onclick = $.StringFormat("$.openURLContent('{0}', '{1}', '{2}');", key.target, key.partial, key.id);
            li += $.StringFormat('<li id="{0}" onclick="{1}"><img src="{2}" /><span>{3}</span><h3>{4}</h3><p>{5}</p></li>', key.id, onclick, key.img, key.placetype, key.neighborhood, key.details);
        });
        $('.flexslider ul').append(li);
        //Flexslider
        $('.flexslider').flexslider({ selector: ".homeSlides > li", animation: "slide", slideshow: false, itemWidth: 520, keyboard: false, mousewheel: false, animationLoop: false, controlNav: false, move: 1 });
    };

    $.homeSlide(home_slide);

    //Posição inicila do mapa
    $.consultaMapa(-22.977281, -47.14822, '#map');

    //Autocomplete google places
    $.searchPlace('endereco');

    //Caixa de detalhes
    $('#advancedSearch').tooltip();
    $('#fastSearch').tooltip();
    $('#hidePanel').tooltip();
    $('#showPanel').tooltip();
    $('.peso').tooltip();
    
    //Aplica o efeito ui slide
    $.criaSlider([$("#pesoAquisicao"), $('#pesoTipoImovel'), $('#pesoPreco'), $('#pesoBairro'), $('#pesoRaio'), $('#pesoDormitorios'), $('#pesoGaragens')]);
    
    //Máscara
    $("#precoDe").maskMoney({ symbol: "R$ ", thousands: ".", precision: 0, allowZero: false, allowNegative: false });
    $("#precoAte").maskMoney({ symbol: "R$ ", thousands: ".", precision: 0, allowZero: false, allowNegative: false }).attr('style', 'display: none !important;');
    $("#raio").maskMoney({ thousands: ".", precision: 0, allowZero: false, allowNegative: false });    

    //Eventos de click
    $("#hidePanel").click(function() { $("#buscaRapida").hide(0, function() { $("#showSearch").show(); }); });
    $('#showPanel').click(function () { $('#showSearch').slideUp('fast', function () { $('#buscaRapida').show(); }); });
    $('.slides > li').click(function () { $.openURLContent('#content', 'detailsproperty', $.StringFormat('id={0}', $(this).attr('id'))); });
    $('#advancedSearch').click(function () { $('#buscaRapida').hide(0, function () { $('#buscaAvancada').slideDown('slow'); }); $('#map').css('height', '330px'); });
    $('#fastSearch').click(function () { $('#buscaAvancada').slideUp('slow', function () { $('#buscaRapida').show(); }); $('#map').css('height', '450px'); });

    //Eventos de foco
    $('#precoDe').focus(function () { $('#precoAte').removeAttr('style'); }); 
    $('#bairro').focus(function () { $(this).removeClass('inputSizeMediumSmaller').addClass('inputSizeMedium'); }).blur(function () { $(this).removeClass('inputSizeMedium').addClass('inputSizeMediumSmaller'); });
</script>